<head>
    <script src="cordova.js"></script>
    <script src="js/ApiRTC.min.js"></script>
</head>

<body onload="loader()">
    <input type="text" id="number" value="" placeholder="Enter Destination ID"/>
    <input id="call" type="button" value="Call" />
    <input id="hangup" type="button" hidden value="Hangup" />
    <span id="status">Registration Ongoing</span>

    <div id="myRemoteVideo" style="width:640px; height:480px;"></div>
    <video width="30%" height="30%" id="myMiniVideo" autoplay="autoplay"></video>



    <script>
        function loader() {
            document.addEventListener("deviceready", onDeviceReady, false);
        }

        function onDeviceReady() {
            phonertc = cordova.require('com.apizee.phonertc.PhoneRTC');
        }

        apiRTC.init({
            ccsServer: "192.168.1.38:8000",
            //apiCCId : "1234", // Your can overide your number
            onReady: sessionReadyHandler
        });

        function sessionReadyHandler(e) 
        {
            // Your number : apiCC.session.apiCCId

            apiRTC.addEventListener("incomingCall", incomingCallHandler);
            apiRTC.addEventListener("userMediaError", userMediaErrorHandler);

            var webRTCClient = apiCC.session.createWebRTCClient({
                minilocalVideo : "myMiniVideo",
                remoteVideo : "myRemoteVideo",
                status : "status"
            });

            $("#call").click(function () {
                $("#call").hide();
                $("#hangup").show();

                apiRTC.addEventListener("remoteHangup", remoteHangupHandler);
                destNumber = $("#number").val();
                webRTCClient.call(destNumber);
            });

            $("#hangup").click(function () {
                $("#call").show();
                $("#hangup").hide();

                webRTCClient.hangUp();
            });
        }
        function incomingCallHandler(e) {
            apiRTC.addEventListener("remoteHangup", remoteHangupHandler);
            $("#call").hide();
            $("#hangup").show();
        }

        function remoteHangupHandler(e) {
            $("#call").show();
            $("#hangup").hide();
        }

        function userMediaErrorHandler(e) {
            $("#call").show();
            $("#hangup").hide();
        }
    </script>
</body>